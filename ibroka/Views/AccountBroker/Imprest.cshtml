@model IEnumerable<ibroka.Models.AccountBroker.Imprest>



@{
    ViewData["Title"] = "Imprest";
    Layout = "~/Views/Shared/_LayoutAccountBrokers.cshtml";
}
<style>
    .body-card {
        margin-left: 2%;
        margin-right: 2%;
        margin-top: 1%;
        margin-bottom: 2%;
    }

    .table-font {
        font-weight: 500;
    }
</style>

<div class="content">
    <div class="row">
        <div class="col-md-12">
            <div class="card card-stats card-raised">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="statistics">
                                <div class="info">
                                    <div class="icon icon-primary">
                                        <i class="now-ui-icons users_single-02"></i>

                                    </div>
                                    <h3 class="info-title"> ₦40</h3>
                                    <h6 class="stats-title">DAILY</h6>

                                </div>
                            </div>
                        </div>
                        @*<div class="col-md-3">
                                <div class="statistics">
                                    <div class="info">
                                        <div class="icon icon-success">
                                            <i class="now-ui-icons business_money-coins"></i>
                                        </div>
                                        <h3 class="info-title">
                                            45
                                        </h3>
                                        <h6 class="stats-title">Today Revenue</h6>
                                    </div>
                                </div>
                            </div>*@
                        <div class="col-md-4">
                            <div class="statistics">
                                <div class="info">
                                    <div class="icon icon-info">
                                        <i class="now-ui-icons objects_support-17"></i>
                                    </div>
                                    <h3 class="info-title"> ₦500</h3>
                                    <h6 class="stats-title">WEEKLY</h6>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="statistics">
                                <div class="info">
                                    <div class="icon icon-danger">
                                        <i class="now-ui-icons ui-2_chat-round"></i>

                                    </div>
                                    <h3 class="info-title"> ₦4,000</h3>
                                    <h6 class="stats-title">MONTHLY</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>









    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header body-card">

                    <div class="col-md-12">
                        <div class="row justify-content-end">
                            <div class="col-md-3">
                                @*<div class="col-lg-5 col-md-6 col-sm-3">*@
                                    @*<div class="form-group">*@

                                    <div>
                                        <select class="selectpicker" data-style="btn btn-default btn-round" title="Choose City" data-size="7">
                                            <option selected value=''>--All--</option>
                                            <option value='1'>Janaury</option>
                                            <option value='2'>February</option>
                                            <option value='3'>March</option>
                                            <option value='4'>April</option>
                                            <option value='5'>May</option>
                                            <option value='6'>June</option>
                                            <option value='7'>July</option>
                                            <option value='8'>August</option>
                                            <option value='9'>September</option>
                                            <option value='10'>October</option>
                                            <option value='11'>November</option>
                                            <option value='12'>December</option>
                                        </select>
                                    </div>

                                    @*</div>*@
                                </div>

                                <div class="col-md-3">
                                    @*<div class="col-lg-5 col-md-6 col-sm-3">*@
                                    @*<div class="form-group">*@
                                    <div>
                                        <select class="selectpicker" data-style="btn btn-default btn-round" data-size="7">
                                            <option selected value=''>--All--</option>
                                            <option value="2019">2019</option>
                                            <option value="2018">2018</option>
                                            <option value="2017">2017</option>
                                            <option value="2016">2016</option>
                                            <option value="2015">2015</option>
                                            <option value="2014">2014</option>
                                            <option value="2013">2013</option>
                                            <option value="2012">2012</option>
                                            <option value="2011">2011</option>
                                            <option value="2010">2010</option>
                                            <option value="2009">2009</option>
                                            <option value="2008">2008</option>
                                            <option value="2007">2007</option>
                                            <option value="2006">2006</option>
                                            <option value="2005">2005</option>
                                            <option value="2004">2004</option>
                                            <option value="2003">2003</option>
                                            <option value="2002">2002</option>
                                            <option value="2001">2001</option>
                                            <option value="2000">2000</option>
                                            <option value="1999">1999</option>
                                            <option value="1998">1998</option>
                                            <option value="1997">1997</option>
                                            <option value="1996">1996</option>
                                            <option value="1995">1995</option>
                                            <option value="1994">1994</option>
                                            <option value="1993">1993</option>
                                            <option value="1992">1992</option>
                                            <option value="1991">1991</option>
                                            <option value="1990">1990</option>
                                        </select>
                                        <br />
                                        <br />
                                        @*</div>*@
                                    </div>

                                </div>

                            </div>
                        </div>


                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-3 pull-left">
                                <h4 class="card-title">Imprest</h4>
                            </div>

                            <div class="btn-group pull-right">






                                <button class="btn btn-info pull-right" data-toggle="modal" data-target="#noticeModal">
                                    Add New
                                </button>


                            </div>
                        </div>
                    </div>
                </div>


                    <!-- notice modal -->
                    <div class="modal fade" id="noticeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-notice">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                        <i class="now-ui-icons ui-1_simple-remove"></i>
                                    </button>
                                    <h5 class="modal-title" id="myModalLabel">Create Imprest</h5>
                                </div>
                                <div class="modal-body">
                                    <div class="instruction">
                                        <form>
                                            @*<div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label>Date</label>
                                            <input type="date" class="form-control" placeholder="" id="Date" required>
                                        </div>
                                    </div>
                                </div>*@
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Particulars</label>
                                                        <input type="text" class="form-control" placeholder="Enter Particulars" id="Particular" required>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Amount</label>
                                                        <input type="number" class="form-control" placeholder="" id="Amount" required>
                                                    </div>
                                                </div>
                                            </div>


                                            <br />
                                            <div class="card-footer">
                                                <button type="button" class="btn btn-fill btn-primary btn-round" id="SubmitNewImprest">Create</button>
                                                <button type="button" class="btn btn-info btn-round" data-dismiss="modal">Close</button>
                                            </div>
                                        </form>
                                    </div>
                                    @*<p>If you have more questions, don't hesitate to contact us or send us a tweet  creativetim. We're here to help!</p>*@
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end notice modal -->


                    <div class="card-body body-card">
                        <div class="col-md-12">
                            <div class="table-responsive" style="overflow: auto;">
                                <table id="datatable" class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th><strong>#</strong></th>
                                            <th scope="col"><strong>Date</strong></th>
                                            <th scope="col"><strong>Particulars</strong></th>
                                            <th scope="col"><strong>Amount</strong></th>

                                        </tr>
                                    </thead>

                                    <tbody class="fontweight">
                                        @{
                                            int i = 1;

                                            @if (Model.Count() < 1)
                                            {
                                            <td></td>
                                            <td>No Data to Display</td>
                                            <td></td>
                                            <td></td>
                                        }

                                            @foreach (var item in Model)
                                            {
                                                <tr>
                                                    <td>@i</td>
                                                    <td>@item.DateCreated.ToString("yyyy-MM-dd")</td>
                                                    <td>@item.Particular</td>
                                                    <td>@item.Amount</td>
                                                </tr>

                                                { i = i + 1; }
                                            }
                                        }
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>

            </div>
        </div>
    </div>

    @section Scripts {

        <script type="text/javascript">

            $(document).ready(function () {
                $("#SubmitNewImprest").click(function (event) {

                    event.preventDefault();

                    var Imprest = {
                        //Date: $("#Date").val(),
                        Particular: $("#Particular").val(),
                        Amount: $("#Amount").val(),
                    };


                    // console.log(Items);
                    console.log(Imprest);

                    $.ajax({
                        type: "POST",
                        url: "/AccountBroker/postNewImprest",
                        data: JSON.stringify(Imprest),
                        dataType: "json",
                        contentType: 'application/json; charset=utf-8',
                        headers: {
                            RequestVerificationToken:
                                $('input:hidden[name="__RequestVerificationToken"]').val()
                        },
                        success: function (r) {

                            if (r.msg == "Success") {

                                demo.showSwal('success-message');

                            } else if (r.msg == "Fail") {

                                alert(r.msg);

                            } else if (r.msg == "No Data") {
                                alert(r.msg);

                            } else {
                                alert(r.msg);
                            }
                            //alert(r.msg);
                            // window.location.reload();

                        },
                        error: function () {
                            alert(r.msg);
                        }
                    });
                });
            });

            </script>



        }
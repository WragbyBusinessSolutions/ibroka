@model ibroka.Models.LeadManagement.Lead

@{
    ViewData["Title"] = "Business Operations";

    Layout = "~/Views/Shared/_LayoutLeadManagement.cshtml";
}

<script src="~/assets/js/core/jquery.min.js"></script>
@*<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>*@
@*<script src="~/assets/js/core/jquery.min.js"></script>*@
@*<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />*@
<link href="~/css/custom.css" rel="stylesheet" />
@*<script src="~/assets/js/plugins/jquery.dataTables.min.js"></script>*@
<script src="~/js/LeadCustom.js"></script>
<style>

    #profileDetails select, input {
        width: 80% !important;
    }

    #profileDetails input[type="submit"] {
        width: 20% !important;
    }


    label {
        display: inline-block;
        margin-top: 6px;
        margin-bottom: 0px;
    }


    .form-group .form-control, .input-group .form-control {
        padding: 6px 18px 6px 18px;
        width: 80% !important;
    }

    select.form-control:not([size]):not([multiple]) {
        height: calc(1.88rem + 2px);
    }

    .input-group, .form-group {
        margin-bottom: 0px;
        position: relative;
    }
</style>
<div class="content">

    <div class="col-md-12 mr-auto ml-auto">
        <div class="content">
            @Html.Partial("~/Views/Manage/_LeadStatusMessage.cshtml", ViewData["StatusMessage"])
            <div class="row">

                <div class="card ">
                    <div class="card-body ">

                        <div class="row">

                            <ul style="display:inline-block; margin-top:20px;margin-bottom:10px" class="nav nav-pills nav-pills-primary flex-column" role="tablist">

                                <li style="display:inline-block; " class="nav-item col-md-3">
                                    <a style="padding:10px 10px; width:170px;margin-left:10px" class="nav-link active" data-toggle="tab" href="#profileDetails" role="tablist">
                                        Details
                                    </a>
                                </li>



                                <li style="display:inline-block" class="nav-item col-md-3">
                                    <a id="nvLiLeads" style="padding:10px 10px; width:170px;margin-left:30px" class="nav-link" data-toggle="tab" href="#leads" role="tablist">
                                        Policies
                                    </a>
                                </li>



                                <li style="display:inline-block" class="nav-item col-md-3">
                                    <a id="nvLiPolicy" style="padding:10px 10px; width:170px; margin-left:50px" class="nav-link" data-toggle="tab" href="#policies" role="tablist">
                                        Policy Management
                                    </a>
                                </li>

                            </ul>
                        </div>
                        @if (ViewBag.LeadClientId != null)
                        {
                            <input type="hidden" id="hdnLeadClientId" value="@ViewBag.LeadClientId" />
                        }
                        else
                        {
                            <input type="hidden" id="hdnLeadClientId" value="" />
                        }

                        <div class="col-md-12">
                            <div style="border:1px solid #ccc; padding:17px" class="tab-content">


                                <div class="tab-pane active" id="profileDetails">
                                    <form enctype="multipart/form-data" method="post">
                                        <div class="row" id="divType">
                                            <input type="hidden" id="hdnEdit" value="@ViewBag.clientEdit" />

                                            @if (Model.Individual != null && Model.Individual.Type == "Individual")
                                            {
                                                <div class="col-md-4" id="divProfilePhoto">

                                                    <div style="padding:0px 0px 0px 60px" class="fileinput fileinput-new text-center" data-provides="fileinput">
                                                        <div class="fileinput-new thumbnail">
                                                            @if (Model.Individual.ClientPhotoPath != null && Model.Individual.ClientPhotoPath != "")
                                                            {

                                                                <img src="@Model.Individual.ClientPhotoPath" style="height:150px;width:150px" id="imageUploadForm" name="image" multiple="multiple" alt="...">
                                                                <input type="hidden" asp-for="@Model.Individual.ClientPhotoPath" value="@Model.Individual.ClientPhotoPath" />

                                                            }
                                                            else
                                                            {
                                                                <img src="../../assets/img/image_placeholder.jpg" style="height:150px;width:150px" id="imageUploadForm" name="image" multiple="multiple" alt="...">
                                                            }
                                                        </div>
                                                        <div class="fileinput-preview fileinput-exists thumbnail"></div>
                                                        <div>
                                                            <span class="btn btn-rose btn-round btn-file">
                                                                <span class="fileinput-new">Select image</span>
                                                                <span class="fileinput-exists">Change</span>
                                                                @Html.TextBoxFor(m => m.Individual.ClientPhoto, new { type = "file" })
                                                                @*<input type="file" name="file" id="file" asp-for="ClientPhoto" />*@
                                                            </span>

                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            <div class="col-md-8">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label>Customer Type</label>
                                                            <select class="form-control" asp-for="Individual.Type" disabled id="ddlClientType">
                                                                <options>
                                                                    @if ((Model.Individual == null && Model.Corporate == null) || (Model.Individual != null && Model.Individual.Type == "Individual"))
                                                                    {
                                                                        <option value="Individual" selected>Individual</option>
                                                                        <option value="Corporate">Corporate</option>

                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="Individual">Individual</option>
                                                                        <option value="Corporate" selected>Corporate</option>
                                                                    }
                                                                </options>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                @if (Model.Individual != null && Model.Individual.Type == "Individual")
                                                {
                                                    <div class="row" id="divIndividual1">
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Title</label>
                                                                <select class="form-control" asp-for="Individual.Title">
                                                                    <options>
                                                                        <option>Mr.</option>
                                                                        <option>Mrs.</option>
                                                                        <option>Ms.</option>
                                                                    </options>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Name</label>
                                                                <input asp-for="Individual.Name" class="form-control" />
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="row" id="divIndividual2">
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Surname</label>
                                                                <input asp-for="Individual.Surname" class="form-control" />
                                                            </div>

                                                        </div>
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <div class="form-group" id="IndividualId2">
                                                                    <label>Other Names</label>
                                                                    <input asp-for="Individual.OtherNames" class="form-control" />
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                        @if (Model.Individual != null && Model.Individual.Type == "Individual")
                                        {
                                            <input asp-for="Individual.Id" class="form-control" style="display:none" />
                                            <div id="divIndividual" class="row">
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <label>Gender</label>
                                                            <select class="form-control" placeholder="Serial Number" asp-for="Individual.Gender" id="ddlGender">
                                                                <options>
                                                                    <option value=""> --- Select --- </option>
                                                                    <option value="Male">Male</option>
                                                                    <option value="Female">Female</option>
                                                                </options>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Nationality</label>
                                                                <input type="hidden" id="hdnIndividualNationality" asp-for="Individual.Nationality" />

                                                                <Select asp-for="Individual.Nationality" class="form-control" id="ddlIndividualNationality" onchange="setddlState('ddlIndividualNationality','hdnIndividualNationality')">
                                                                    <Options>
                                                                        <option value="">--Nationality--</option>
                                                                    </Options>
                                                                </Select>
                                                            </div>

                                                        </div>
                                                        <div class="col-md-4">
                                                            <div style="width:100%" class="form-group">
                                                                <label>Date of birth</label>
                                                                <input style="width:100%" type="date" asp-for="Individual.DateOfBirth" class="form-control" />
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-8">
                                                            <div class="form-group">
                                                                <label>Address</label>
                                                                <input asp-for="Individual.Address" style="width:555px !important" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Phone No</label>
                                                                <input asp-for="Individual.PhoneNo" class="form-control" />
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="row">

                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Email</label>
                                                                <input asp-for="Individual.Email" class="form-control" />
                                                            </div>

                                                        </div>
                                                        <div class="col-md-4">

                                                            <div class="form-group">
                                                                <label>Occupation</label>
                                                                <input asp-for="Individual.Occupation" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Tax No</label>
                                                                <input asp-for="Individual.TaxNo" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">

                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Identification Type</label>
                                                                <input asp-for="Individual.IdentificationType" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Identification No</label>
                                                                <input asp-for="Individual.IdentificationNo" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>ID issue date</label>
                                                                <input asp-for="Individual.IDIssueDate" type="date" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>ID expiry date</label>
                                                                <input asp-for="Individual.IDExpiryDate" type="date" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>ID issuing country</label>
                                                                <input type="hidden" id="hdnIDIssuingCountry" asp-for="Individual.IDIssuingCountry" />
                                                                <select asp-for="Individual.IDIssuingCountry" id="ddlIDIssuingCountry" class="form-control" onchange="setddlState('ddlIDIssuingCountry','hdnIDIssuingCountry')">
                                                                    <Options>
                                                                        <option value="">--Country--</option>
                                                                    </Options>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Source of income</label>
                                                                <input asp-for="Individual.SourceOfIncome" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Bank</label>
                                                                <input asp-for="Individual.Bank" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Account No</label>
                                                                <input asp-for="Individual.AccountNo" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>BVN</label>
                                                                <input asp-for="Individual.BVN" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </div>




                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                @if (ViewBag.clientEdit == null || ViewBag.clientEdit == "false")
                                                                {
                                                                    <div class="row">
                                                                        <div class="col-md-2"><input onclick="redirectClientDetailPage()" id="btnindividualSubmit1" class="btn btn-fill btn-primary" value="Edit" /></div>
                                                                        <div class="col-md-1"></div>
                                                                        <div class="col-md-2"><input onclick="RedirectIndex()" class="btn btn-default" id="btnindividualCancelSubmit1" value="Cancel" readonly="readonly" /></div>
                                                                    </div>

                                                                }
                                                                else
                                                                {<div class="row">
                                                                        <div class="col-md-2"> <input type="submit" id="btnindividualSubmit" class="btn btn-fill btn-primary" style="width:110px !important" value="Save" formaction="/Client/Edit" /></div>
                                                                        <div class="col-md-1"></div>
                                                                        <div class="col-md-2"><input onclick="RedirectCancelEdit()" class="btn btn-default" id="btnindividualSubmitCancel" value="Cancel" readonly="readonly" /></div>
                                                                    </div>

                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        else
                                        {
                                            <input asp-for="Corporate.Id" class="form-control" style="display:none" />
                                            <div id="divCorporate" class="row">
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Company name</label>
                                                                <input asp-for="Corporate.Name" class="form-control" />

                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <div class="form-group">
                                                                    <label>Company address</label>
                                                                    <input asp-for="Corporate.Address" class="form-control" />
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="col-md-4">

                                                            <div class="form-group">
                                                                <label>Email</label>
                                                                <input asp-for="Corporate.Email" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Phone No</label>
                                                                <input asp-for="Corporate.PhoneNo" class="form-control" />
                                                            </div>

                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Incorporation/RC number</label>
                                                                <input asp-for="Corporate.IncorporationOrRCNumber" class="form-control" />
                                                            </div>

                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Incorporation state</label>
                                                                <input type="hidden" id="hdnIncorporationState" asp-for="Corporate.IncorporationState" />
                                                                <Select asp-for="Corporate.IncorporationState" id="ddlIncorporationState" class="form-control" onchange="setddlState('ddlIncorporationState','hdnIncorporationState')">
                                                                    <options>
                                                                        <option value="">--Select State--</option>
                                                                    </options>
                                                                </Select>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Incorporation date</label>
                                                                <input asp-for="Corporate.IncorporationDate" type="date" class="form-control" />
                                                            </div>

                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Tax No</label>
                                                                <input asp-for="Corporate.TaxNo" class="form-control" />
                                                            </div>


                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Company’s Bank</label>
                                                                <input asp-for="Corporate.CompanyBank" class="form-control" />
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Account No</label>
                                                                <input asp-for="Corporate.AccountNo" class="form-control" />
                                                            </div>


                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Bank Branch</label>
                                                                <input asp-for="Corporate.BankBranch" class="form-control" />
                                                            </div>

                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>URL</label>
                                                                <input asp-for="Corporate.URL" class="form-control" />
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>BVN</label>
                                                                <input asp-for="Corporate.BVN" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div>

                                                                <label>Incorporation Certificate</label>
                                                                @if (Model.Corporate != null && !string.IsNullOrEmpty(Model.Corporate.CertificateOfIncorporationPath))
                                                                {
                                                                    <input type="hidden" value="@Model.Corporate.CertificateOfIncorporationPath" asp-for="@Model.Corporate.CertificateOfIncorporationPath" />
                                                                    @if (Model.Corporate.CertificateOfIncorporationPath.Contains("incorporationCertificates"))
                                                                    {
                                                                        <a href="@Model.Corporate.CertificateOfIncorporationPath">View</a>
                                                                    }
                                                                }

                                                                @Html.TextBoxFor(m => m.Corporate.CertificationDocument, new { type = "file" })


                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">

                                                        <div class="col-md-4">
                                                            <div style="margin:30px 0px 0px 0px" class="card" id="divDirectorCard1">
                                                                <div class="card-header" style="padding: 2px 15px 0px!important">
                                                                    <h6 class="card-title">Director 1</h6>
                                                                </div>
                                                                <div class="card-body" style="padding: 0px 0px 6px 5px !important;height:113px">
                                                                    <div class="row">
                                                                        @if (Model.Director1 != null && (Model.Director1.Name != null))
                                                                        {
                                                                            <input asp-for="@Model.Director1.Id" class="form-control" style="display:none" />
                                                                            <div class="col-4">

                                                                                @if (Model.Director1.ProfilePhotoPath != null && Model.Director1.ProfilePhotoPath != "")
                                                                                {
                                                                                    <img src="@Model.Director1.ProfilePhotoPath" style="border-radius: 50%;width: 80px;height: 70px;" />
                                                                                    <input type="hidden" asp-for="@Model.Director1.ProfilePhotoPath" value="@Model.Director1.ProfilePhotoPath" />

                                                                                }
                                                                                else
                                                                                {
                                                                                    <img src="../../assets/img/image_placeholder.jpg" style="border-radius: 50%;width: 80px;height: 70px;" />

                                                                                }
                                                                            </div>
                                                                            <div class="col-8">

                                                                                <div class="row">
                                                                                    <h8 class="card-category">@Model.Director1.Name @Model.Director1.Surname</h8>
                                                                                </div>
                                                                                <div class="row">
                                                                                    @if ((Model.Director1.PhoneNo != null))
                                                                                    {
                                                                                        <label>@Model.Director1.PhoneNo</label>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <label></label>
                                                                                    }
                                                                                </div>
                                                                                <div class="row">
                                                                                    <div class="col-md-5">
                                                                                        <button class="btn btn-success" type="button" title="Click to edit director" data-toggle="modal" data-target="#directorModal1">Edit</button>
                                                                                    </div>
                                                                                    <div class="col-md-4">
                                                                                        <button class="btn btn-success" type="button" onclick="getConfirmationforDelete('btnDeleteDirector1')">Delete</button>
                                                                                        <button class="btn btn-success" type="submit" id="btnDeleteDirector1" title="Click to delete director" style="display:none" formaction="/Client/DeleteDirector1">Delete</button>
                                                                                    </div>
                                                                                </div>

                                                                            </div>

                                                                        }
                                                                        else
                                                                        {<div class="col-12" style="padding:0px 0px 0px 150px">
                                                                                <div class="row">
                                                                                    <button class="btn btn-success" type="button" title="Click to add director" data-toggle="modal" data-target="#directorModal1">Add</button>
                                                                                </div>
                                                                            </div>
                                                                        }
                                                                    </div>

                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="col-md-4">
                                                            <div style="margin:30px 0px 0px 0px" class="card" id="divDirectorCard2">
                                                                <div class="card-header" style="padding: 2px 15px 0px!important">
                                                                    <h6 class="card-title">Director 2</h6>
                                                                </div>
                                                                <div class="card-body" style="padding: 0px 0px 6px 5px !important;height:113px">
                                                                    <div class="row">
                                                                        @if (Model.Director2 != null && Model.Director2.Name != null)
                                                                        {

                                                                            <input asp-for="@Model.Director2.Id" class="form-control" style="display:none" />
                                                                            <div class="col-4">

                                                                                @if (Model.Director2.ProfilePhotoPath != null && Model.Director2.ProfilePhotoPath != "")
                                                                                {
                                                                                    <img src="@Model.Director2.ProfilePhotoPath" style="border-radius: 50%;width: 80px;height: 70px;" />

                                                                                    <input type="hidden" asp-for="@Model.Director2.ProfilePhotoPath" value="@Model.Director2.ProfilePhotoPath" />
                                                                                }
                                                                                else
                                                                                {
                                                                                    <img src="../../assets/img/image_placeholder.jpg" style="border-radius: 50%;width: 80px;height: 70px;" />
                                                                                }
                                                                            </div>
                                                                            <div class="col-8">

                                                                                <div class="row">
                                                                                    <h8 class="card-category">@Model.Director2.Name @Model.Director2.Surname</h8>
                                                                                </div>
                                                                                <div class="row">
                                                                                    @if (Model.Director2.PhoneNo != null)
                                                                                    {
                                                                                        <label>@Model.Director2.PhoneNo</label>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <label></label>
                                                                                    }
                                                                                </div>
                                                                                <div class="row">

                                                                                    <div class="col-md-6">
                                                                                        <button class="btn btn-success" type="button" title="Click to edit director" data-toggle="modal" data-target="#directorModal2">Edit</button>
                                                                                    </div>
                                                                                    <div class="col-md-4">
                                                                                        <button class="btn btn-success" type="button" onclick="getConfirmationforDelete('btnDeleteDirector2')">Delete</button>
                                                                                        <button class="btn btn-success" type="submit" id="btnDeleteDirector2" title="Click to delete director" style="display:none" formaction="/Client/DeleteDirector2">Delete</button>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                        }
                                                                        else
                                                                        {<div class="col-12" style="padding:0px 0px 0px 150px">
                                                                                <div class="row">
                                                                                    <button class="btn btn-success" type="button" title="Click to add director" data-toggle="modal" data-target="#directorModal2">Add</button>
                                                                                </div>
                                                                            </div>
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                @if (ViewBag.clientEdit == null || ViewBag.clientEdit == "false")
                                                                {
                                                                    <div class="row">
                                                                        <div class="col-md-2"><input onclick="redirectClientDetailPage()" id="btnCorporateSubmit1" class="btn btn-fill btn-primary" value="Edit" readonly="readonly" /></div>
                                                                        <div class="col-md-1"></div>
                                                                        <div class="col-md-2"><input onclick="RedirectIndex()" id="btnCorporateSubmitCancel1" class="btn btn-default" value="Cancel" readonly="readonly" /></div>
                                                                    </div>

                                                                }
                                                                else
                                                                {
                                                                    <div class="row">
                                                                        <div class="col-md-2">
                                                                            <input type="submit" id="btnCorporateSave" class="btn btn-fill btn-primary" style="width:110px !important;display:none" value="Save" formaction="/Client/Edit" />
                                                                            <input type="button" id="btnCorporateSubmit" class="btn btn-fill btn-primary" style="width:110px !important" value="Save" onclick="validateDirectors();" />
                                                                        </div>
                                                                        <div class="col-md-1"></div>
                                                                        <div class="col-md-2"><input onclick="RedirectCancelEdit()" id="btnCorporateCancelSubmit" class="btn btn-default" value="Cancel" readonly="readonly" /></div>
                                                                    </div>

                                                                }
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row col-md-12 tab-pane">
                                                        <div style="z-index:99999" class="modal fade" id="directorModal1" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-notice" style="max-width:850px!important">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                                            <i class="now-ui-icons ui-1_simple-remove"></i>
                                                                        </button>
                                                                        <h5 class="modal-title" id="myModalLabel">Enter Dirtector Detail</h5>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <div>

                                                                            <div class="row">
                                                                                <div class="col-md-3">

                                                                                    <div class="fileinput fileinput-new text-center" data-provides="fileinput">
                                                                                        <div class="fileinput-new thumbnail">
                                                                                            @if (Model.Director1 != null && Model.Director1.ProfilePhotoPath != null && Model.Director1.ProfilePhotoPath != "")
                                                                                            {
                                                                                                <img src="@Model.Director1.ProfilePhotoPath" id="imageUploadDirector1" name="image" multiple="multiple" alt="..." width="100%">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <img src="../../assets/img/image_placeholder.jpg" id="imageUploadDirector1" name="image" multiple="multiple" alt="..." width="100%">
                                                                                            }
                                                                                        </div>
                                                                                        <div class="fileinput-preview fileinput-exists thumbnail"></div>
                                                                                        <div>
                                                                                            <span class="btn btn-rose btn-round btn-file">
                                                                                                <span class="fileinput-new">Select image</span>
                                                                                                <span class="fileinput-exists">Change</span>

                                                                                                @Html.TextBoxFor(m => m.Director1.ProfilePhoto, new { type = "file" })

                                                                                            </span>
                                                                                            @*<a href="#pablo" class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput"><i class="fa fa-times"></i> Remove</a>*@
                                                                                        </div>

                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-9">
                                                                                    <div class="row">
                                                                                        <div class="col-4">
                                                                                            <div class="form-group">
                                                                                                <label>Title</label>
                                                                                                <select class="form-control" asp-for="Director1.Title">
                                                                                                    <options>
                                                                                                        <option>Mr.</option>
                                                                                                        <option>Mrs.</option>
                                                                                                    </options>
                                                                                                </select>
                                                                                            </div>


                                                                                        </div>
                                                                                        <div class="col-4">
                                                                                            <div class="form-group">
                                                                                                <label>Name</label>
                                                                                                <input asp-for="Director1.Name" class="form-control" />
                                                                                            </div>
                                                                                        </div>



                                                                                        <div class="col-4">
                                                                                            <div class="form-group" id="IndividualId1">
                                                                                                <label>Surname</label>
                                                                                                <input asp-for="Director1.Surname" class="form-control" />
                                                                                            </div>


                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-4">
                                                                                            <div class="form-group" id="IndividualId2">
                                                                                                <label>Other Names</label>
                                                                                                <input asp-for="Director1.OtherNames" class="form-control" />
                                                                                            </div>
                                                                                        </div>




                                                                                        <div class="col-4">
                                                                                            <div style="width:100%" class="form-group">
                                                                                                <label>Date of birth</label>
                                                                                                <input style="width:100%" type="date" asp-for="Director1.DateOfBirth" class="form-control" />
                                                                                            </div>
                                                                                        </div>



                                                                                        <div class="col-4">
                                                                                            <div style="width:100%" class="form-group">
                                                                                                <label>Gender</label>
                                                                                                <select style="width:100%" class="form-control" placeholder="Serial Number" asp-for="Director1.Gender">
                                                                                                    <options>
                                                                                                        <option value=""> --- Select --- </option>
                                                                                                        <option value="Male">Male</option>
                                                                                                        <option value="Female">Female</option>
                                                                                                    </options>
                                                                                                </select>
                                                                                            </div>
                                                                                        </div>

                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row">
                                                                                <div class="col-3">
                                                                                    <div class="form-group">
                                                                                        <label>Nationality</label>
                                                                                        <input type="hidden" id="hdnDirector1Nationality" asp-for="Director1.Nationality" />
                                                                                        <Select asp-for="Director1.Nationality" id="ddlDirector1Nationality" class="form-control" onchange="setddlState('ddlDirector1Nationality','hdnDirector1Nationality')">
                                                                                            <options>
                                                                                                <option value="">--Nationality--</option>
                                                                                            </options>
                                                                                        </Select>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-6">
                                                                                    <div class="form-group">
                                                                                        <label>Address</label>
                                                                                        <input asp-for="Director1.Address" style="width:350px !important" class="form-control" />
                                                                                    </div>
                                                                                </div>



                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>Email</label>
                                                                                        <input asp-for="Director1.Email" class="form-control" />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row">
                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>Phone No</label>
                                                                                        <input asp-for="Director1.PhoneNo" class="form-control" />
                                                                                    </div>

                                                                                </div>
                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>Tax No</label>
                                                                                        <input asp-for="Director1.TaxNo" class="form-control" />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>Occupation</label>
                                                                                        <input asp-for="Director1.Occupation" class="form-control" />
                                                                                    </div>

                                                                                </div>

                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>Identification Type</label>
                                                                                        <input asp-for="Director1.IdentificationType" class="form-control" />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row">
                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>Identification No</label>
                                                                                        <input asp-for="Director1.IdentificationNo" class="form-control" />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>ID issue date</label>
                                                                                        <input asp-for="Director1.IDIssueDate" type="date" class="form-control" />
                                                                                    </div>
                                                                                </div>

                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>ID expiry date</label>
                                                                                        <input asp-for="Director1.IDExpiryDate" type="date" class="form-control" />
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>ID issuing country</label>
                                                                                        <input type="hidden" id="hdnDirector1IDIssueingCoutnry" asp-for="Director1.IDIssuingCountry" />
                                                                                        <select asp-for="Director1.IDIssuingCountry" id="ddlDirector1IDIssueingCoutnry" class="form-control" onchange="setddlState('ddlDirector1IDIssueingCoutnry','hdnDirector1IDIssueingCoutnry')">
                                                                                            <options>
                                                                                                <option value="">--Select Country--</option>
                                                                                            </options>
                                                                                        </select>
                                                                                    </div>
                                                                                </div>
                                                                            </div>


                                                                            <div class="row">
                                                                                <div class="col-md-3">
                                                                                    <div class="form-group">
                                                                                        <label>Source of income</label>
                                                                                        <input asp-for="Director1.SourceOfIncome" class="form-control" />
                                                                                    </div>
                                                                                </div>

                                                                            </div>

                                                                            <div class="row">
                                                                                <div class="col-md-12">
                                                                                    <div class="form-group">
                                                                                        <div class="row">
                                                                                            <div class="col-md-3"><input type="button" class="btn btn-fill btn-primary" onclick="Director1validate()" value="Save" readonly="readonly" /><input type="submit" class="btn btn-fill btn-primary" id="btnDirector1" style="display:none" value="Update" formaction="/Client/UpdateDirector" readonly="readonly" /></div>
                                                                                            <div class="col-md-1"></div>
                                                                                            <div class="col-md-2"><input data-dismiss="modal" aria-hidden="true" class="btn btn-default" value="Cancel" onclick="resetDirectorValues('director1')" readonly="readonly" /></div>
                                                                                        </div>

                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                    </div>



                                                                </div>






                                                            </div>

                                                        </div>

                                                    </div>


                                                    <div class="row col-md-12 tab-pane">
                                                        <div style="z-index:99999" class="modal fade" id="directorModal2" tabindex="-1" data-backdrop="static" data-keyboard="false" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-notice" style="max-width:850px!important">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                                            <i class="now-ui-icons ui-1_simple-remove"></i>
                                                                        </button>
                                                                        <h5 class="modal-title" id="myModalLabel">Enter Dirtector Detail</h5>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <div>

                                                                            <div class="row">
                                                                                <div class="col-md-3">

                                                                                    <div class="fileinput fileinput-new text-center" data-provides="fileinput">
                                                                                        <div class="fileinput-new thumbnail">
                                                                                            @if (Model.Director2 != null && Model.Director2.ProfilePhotoPath != null && Model.Director2.ProfilePhotoPath != "")
                                                                                            {
                                                                                                <img src="@Model.Director2.ProfilePhotoPath" id="imageUploadDirector1" name="image" multiple="multiple" alt="...">
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <img src="../../assets/img/image_placeholder.jpg" id="imageUploadDirector1" name="image" multiple="multiple" alt="...">
                                                                                            }
                                                                                        </div>
                                                                                        <div class="fileinput-preview fileinput-exists thumbnail"></div>
                                                                                        <div>
                                                                                            <span class="btn btn-rose btn-round btn-file">
                                                                                                <span class="fileinput-new">Select image</span>
                                                                                                <span class="fileinput-exists">Change</span>
                                                                                                @Html.TextBoxFor(m => m.Director2.ProfilePhoto, new { type = "file" })
                                                                                            </span>
                                                                                            @*<a href="#pablo" class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput"><i class="fa fa-times"></i> Remove</a>*@
                                                                                        </div>

                                                                                    </div>

                                                                                </div>
                                                                                <div class="col-md-9">
                                                                                    <div class="row">
                                                                                        <div class="col-4">
                                                                                            <div class="form-group">
                                                                                                <label>Title</label>
                                                                                                <select class="form-control" asp-for="Director2.Title">
                                                                                                    <options>
                                                                                                        <option>Mr.</option>
                                                                                                        <option>Mrs.</option>
                                                                                                    </options>
                                                                                                </select>
                                                                                            </div>


                                                                                        </div>
                                                                                        <div class="col-4">
                                                                                            <div class="form-group">
                                                                                                <label>Name</label>
                                                                                                <input asp-for="Director2.Name" class="form-control" />
                                                                                            </div>
                                                                                        </div>


                                                                                        <div class="col-4">
                                                                                            <div class="form-group" id="IndividualId1">
                                                                                                <label>Surname</label>
                                                                                                <input asp-for="Director2.Surname" class="form-control" />
                                                                                            </div>


                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-4">
                                                                                            <div class="form-group" id="IndividualId2">
                                                                                                <label>Other Names</label>
                                                                                                <input asp-for="Director2.OtherNames" class="form-control" />
                                                                                            </div>
                                                                                        </div>




                                                                                        <div class="col-4">
                                                                                            <div class="form-group">
                                                                                                <label>Date of birth</label>
                                                                                                <input type="date" asp-for="Director2.DateOfBirth" class="form-control" />
                                                                                            </div>


                                                                                        </div>
                                                                                        <div class="col-4">
                                                                                            <div style="width:100%" class="form-group">
                                                                                                <label>Gender</label>
                                                                                                <select style="width:100%" class="form-control" placeholder="Serial Number" asp-for="Director2.Gender">
                                                                                                    <options>
                                                                                                        <option value=""> --- Select --- </option>
                                                                                                        <option value="Male">Male</option>
                                                                                                        <option value="Female">Female</option>
                                                                                                    </options>
                                                                                                </select>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row">
                                                                            <div class="col-3">
                                                                                <div class="form-group">
                                                                                    <label>Nationality</label>
                                                                                    <input type="hidden" id="hdnDirector2Nationality" asp-for="Corporate.Nationality" />
                                                                                    <Select asp-for="Director2.Nationality" id="ddlDirector2Nationality" class="form-control" onchange="setddlState('ddlDirector2Nationality','hdnDirector2Nationality')">
                                                                                        <options>
                                                                                            <option value="">--Nationality--</option>
                                                                                        </options>
                                                                                    </Select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-6">
                                                                                <div class="form-group">
                                                                                    <label>Address</label>
                                                                                    <input asp-for="Director2.Address" style="width:350px !important" class="form-control" />
                                                                                </div>
                                                                            </div>



                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>Email</label>
                                                                                    <input asp-for="Director2.Email" class="form-control" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>Phone No</label>
                                                                                    <input asp-for="Director2.PhoneNo" class="form-control" />
                                                                                </div>

                                                                            </div>
                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>Tax No</label>
                                                                                    <input asp-for="Director2.TaxNo" class="form-control" />
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>Occupation</label>
                                                                                    <input asp-for="Director2.Occupation" class="form-control" />
                                                                                </div>

                                                                            </div>

                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>Identification Type</label>
                                                                                    <input asp-for="Director2.IdentificationType" class="form-control" />
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row">
                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>Identification No</label>
                                                                                    <input asp-for="Director2.IdentificationNo" class="form-control" />
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>ID issue date</label>
                                                                                    <input asp-for="Director2.IDIssueDate" type="date" class="form-control" />
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>ID expiry date</label>
                                                                                    <input asp-for="Director2.IDExpiryDate" type="date" class="form-control" />
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>ID issuing country</label>
                                                                                    <input type="hidden" id="hdnDirector2IDIssueingCoutnry" asp-for="Corporate.IDIssuingCountry" />
                                                                                    <select asp-for="Director2.IDIssuingCountry" id="ddlDirector2IDIssueingCoutnry" class="form-control" onchange="setddlState('ddlDirector2IDIssueingCoutnry','hdnDirector2IDIssueingCoutnry')">
                                                                                        <options>
                                                                                            <option value="">--Select Country--</option>
                                                                                        </options>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>


                                                                        <div class="row">
                                                                            <div class="col-md-3">
                                                                                <div class="form-group">
                                                                                    <label>Source of income</label>
                                                                                    <input asp-for="Director2.SourceOfIncome" class="form-control" />
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <div class="row">
                                                                                        <div class="col-md-3"><input type="button" class="btn btn-fill btn-primary" value="Save" onclick="Director2validate()" readonly="readonly" /><input type="submit" class="btn btn-fill btn-primary" id="btnDirector2" style="display:none" value="Update" formaction="/Client/UpdateDirector" /></div>
                                                                                        <div class="col-md-1"></div>
                                                                                        <div class="col-md-2"><input data-dismiss="modal" aria-hidden="true" class="btn btn-default" value="Cancel" onclick="resetDirectorValues('director2')" readonly="readonly" /></div>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>







                                                            </div>

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </form>
                                </div>

                                <div class="tab-pane" id="leads">
                                    <div class="card-body">
                                        <div style="margin-top:-35px;" class="card-header">
                                            <h4 style="border-bottom:1px solid #ccc" class="card-title">
                                                Policies  <button style="float:right;  margin-top:2px;   padding: 6px 20px;
    font-size: 14px;" onclick="addNewLeadView('@Model.clientId')" class="btn btn-success btn-round" id="btnAddNew" data-toggle="modal" data-target="#noticeModal23">
                                                    <i class="now-ui-icons ui-1_simple-add"></i>   Add
                                                </button>
                                            </h4>

                                        </div>
                                       
                                        <div id="dvLeads"><span id="spnLoading">Loading...</span></div>
                                    </div>


                                </div>


                                <div class="tab-pane" id="policies">

                                    <div class="card-body">
                                        <div style="margin-top:-35px;" class="card-header">
                                            <h4 style="border-bottom:1px solid #ccc" class="card-title">
                                                Policy Management
                                            </h4>

                                        </div>
                                        @*@if (Model.Policies != null && Model.Policies.Count > 0)
                                            {
                                                <div style="padding:0px; margin:0px">
                                                    <div style="padding:0px; margin:0px" class="card-header ">
                                                        <table style="padding:0px; margin:0px" id="datatable" class="table table-striped table-bordered" cellspacing="0" width="100%">
                                                            <thead>
                                                                <tr style="width:100%">
                                                                    <th style="width:20px" class="text-center">
                                                                        #
                                                                    </th>
                                                                    <th>
                                                                        Policy Name
                                                                    </th>
                                                                    <th>
                                                                        Start Date
                                                                    </th>
                                                                    <th>
                                                                        End Date
                                                                    </th>
                                                                    <th>
                                                                        Gross Premimum
                                                                    </th>
                                                                    <th>
                                                                        Brokerage Commission
                                                                    </th>
                                                                    <th>
                                                                        Insurer
                                                                    </th>
                                                                    <th></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @{int i = 1;
                                                                    @foreach (var item in Model.Policies)
                                                                    {
                                                                        <tr>
                                                                            <td class="text-center">@i</td>
                                                                            <td>
                                                                                @Html.DisplayFor(modelItem => item.PolicyName)
                                                                            </td>
                                                                            <td>

                                                                                @Convert.ToDateTime(item.StartDate).ToString("dd/MM/yyyy")
                                                                            </td>
                                                                            <td>

                                                                                @Convert.ToDateTime(item.EndDate).ToString("dd/MM/yyyy")
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayFor(modelItem => item.GrossPremium)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayFor(modelItem => item.Commission)
                                                                            </td>
                                                                            <td>

                                                                                @Html.DisplayFor(modelItem => item.InsurerName)
                                                                            </td>
                                                                            <td>

                                                                                <a href="#" class="btn btn-sm btn-info btn-icon btn-round" onclick="loadPolicyDetailsView('@item.LeadId')" id="btnPolicyView" data-toggle="modal" data-target="#noticeModal23" title=" View Details" data-placement="top" rel="tooltip" data-original-title="View Details">
                                                                                    <i class="fa fa-eye"></i>
                                                                                </a>
                                                                                <a href="#" class="btn btn-round btn-warning btn-icon btn-sm" onclick="loadDebitNoteView('@item.LeadId')" id="btnPolicyGenerateDebitNote" data-toggle="modal" data-target="#noticeModal23" title="Generate Debit Note" data-placement="top" rel="tooltip" data-original-title="Generate Debit Note">
                                                                                    <i class="far fa-file-alt"></i>
                                                                                </a>
                                                                                <a href="#" class="btn btn-round btn-warning btn-icon btn-sm" onclick="generateLeadPayment('@item.LeadId', 'false')" id="btnPolicyGenPayReceipt" data-toggle="modal" data-target="#noticeModal23" title=" Generate Payment Receipt" data-placement="top" rel="tooltip" data-original-title="Generate Payment Receipt">
                                                                                    <i class="fas fa-dollar-sign"></i>
                                                                                </a>

                                                                                <a href="#" class="btn btn-round btn-warning btn-icon btn-sm" onclick="loadCreditNoteView('@item.LeadId')" id="btnCreditNote" data-toggle="modal" data-target="#noticeModal23" title="Generate Credit Note" data-placement="top" rel="tooltip" data-original-title="Generate Credit Note">
                                                                                    <i class="fas fa-file-invoice"></i>
                                                                                </a>
                                                                                <a href="#" class="btn btn-round btn-warning btn-icon btn-sm" id="btnUpdatePolicyNo" data-toggle="modal" data-target="#policyNoModal" EditPolicyId="@item.Id" EditPolicyIdNo="@item.PolicyNo" EditReceiptNoImgUrl="@item.ReceiptImgUrl" title="Update Policy No" data-placement="top" rel="tooltip" data-original-title="Update Policy No">
                                                                                    <i class="fa fa-edit"></i>
                                                                                </a>
                                                                                @if (!string.IsNullOrEmpty(item.PolicyNo))
                                                                                {
                                                                                    <a href="#" class="btn btn-round btn-warning btn-icon btn-sm" id="btnUploadReceipt" data-toggle="modal" data-target="#policyReceiptModal" EditPolicyId="@item.Id" EditPolicyIdNo="@item.PolicyNo" EditReceiptImgUrl="@item.ReceiptImgUrl" EditReceiptNo="@item.ReceiptNo" EditReceiptDate="@item.Receipt_Date" title="Upload Policy Receipt" data-placement="top" rel="tooltip" data-original-title="Upload Policy Receipt">
                                                                                        <i class="fas fa-upload"></i>

                                                                                    </a>
                                                                                }
                                                                                <a href="#" class="btn btn-round btn-warning btn-icon btn-sm" id="btnPolicyEndorsement" onclick="createEndorsement('@item.Id', 'false')" data-toggle="modal" data-target="#endorseModal" title="Create endorsement" data-placement="top" rel="tooltip" data-original-title="Create endorsement">
                                                                                    <i class="fas fa-plus"></i>

                                                                                </a>
                                                                            </td>
                                                                        </tr>
                                                                        { i = i + 1; }
                                                                    }

                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                            }
                                            else
                                            {
                                                <span> No Data Found</span>
                                            }*@

                                        <div id="dvPolicy"></div>
                                        <br />

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="noticeModal23" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="max-width:650px" class="modal-dialog modal-notice">
        <div style="padding:0px !important" class="modal-content">
            <div style="padding:0px !important" class="modal-header">
                <div id="dialog562">
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="endorseModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="max-width:650px" class="modal-dialog modal-notice">
        <div style="padding:0px !important" class="modal-content">
            <div style="padding:0px !important" class="modal-header">
                <div id="dialogEndorse">
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="endorseDebitModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="max-width:650px" class="modal-dialog modal-notice">
        <div style="padding:0px !important" class="modal-content">
            <div style="padding:0px !important" class="modal-header">
                <div id="dialogDebitEndorse">
                </div>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="paymentModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="max-width:600px;" class="modal-dialog modal-notice">
        <form method="post">
            <input id="pLeadtId" name="pLeadtId" hidden />
            <div class="modal-dialog modal-notice" style="width:100%">
                <div class="modal-content" style="width:600px !important">
                    <div style="padding:0px;" class="modal-header">
                        <div style="background-color:#214166; margin:0px;color:white" class="row col-md-12">
                            @*<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    <i class="now-ui-icons ui-1_simple-remove"></i>
                                </button>*@
                            <h5 class="modal-title" id="myModalLabel">Payment Details</h5>
                        </div>
                    </div>
                    <div class="modal-body" style="width:100% !important">
                      <div class="instruction">

                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <label>Debit Note No</label>

                            </div>
                          </div>
                          <div class="col-md-5">
                            <div class="form-group">
                              <input type="text" class="form-control" name="pDebitNoteNo" id="pDebitNoteNo" readonly>
                              <input type="text" class="form-control" name="pDebitNoteId" id="pDebitNoteId" readonly style="display:none">
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="form-group">

                              <button style="padding:6px 10px" class="btn btn-fill btn-primary btn-round" id="btnGenPayment">
                                Generate
                              </button>&nbsp;
                              <input style="margin-top:10px; padding:7px 14px; width:70px !important;  float:right" type="button" value="Close" class="btn btn-info btn-round" data-dismiss="modal" aria-hidden="true" />
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <label>Debit Amount</label>

                            </div>
                          </div>
                          <div class="col-md-5">
                            <div class="form-group">

                              <input type="text" class="form-control" id="pDebitAmount" readonly>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="form-group">


                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <label>Payment Type</label>

                            </div>
                          </div>
                          <div class="col-md-7">
                            <div class="form-group">
                              <select class="form-control" asp-items="ViewBag.PaymentType" id="sltPaymentType">

                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Date Of Payment</label>
                              <input type="Date" class="form-control" id="txtPaymentDate" required>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Amount</label>
                              <input type="text" class="form-control" id="txtPaymentAmount" required onchange="checkFloatNumber(this);" onkeypress="return validateFloatKeyPress(this,event);" step='0.01' placeholder='0.00' />
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>

                </div>
            </div>
        </form>
    </div>
</div>



<div class="modal fade" id="policyNoModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="max-width:600px;" class="modal-dialog modal-notice">
        <form method="post">
            <input id="pPolicyId" name="pPolicyId" hidden />
            <div class="modal-dialog modal-notice" style="width:100%">
                <div class="modal-content" style="width:600px !important">
                    <div style="padding:0px;" class="modal-header">
                        <div style="background-color:#214166; margin:0px;color:white" class="row col-md-12">

                            <h5 class="modal-title" id="myModalLabel">Update Policy No</h5>
                        </div>
                    </div>
                    <div class="modal-body" style="width:100% !important">
                        <div class="instruction">
                            <div class="row">
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label style="margin-top:0px !important">Policy No:</label>

                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="txtPolicyNo" required>

                                        <label id="lblPolicyNo" style="margin-top:0px !important"></label>
                                        <input id="txtPolicyReceiptUrl" name="txtPolicyReceiptUrl" hidden />
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-3">

                                </div>
                                <div class="col-md-5">

                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">

                                        <button style="padding:8px 18px" class="btn btn-fill btn-primary btn-round" id="btn_UpdatePolicyNo">
                                            Save
                                        </button>&nbsp;
                                        <input style="margin-top:10px; padding:7px 14px; width:70px !important;  float:right" type="button" value="Close" class="btn btn-info btn-round" data-dismiss="modal" aria-hidden="true" />
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </form>
    </div>
</div>




<div class="modal fade" id="policyReceiptModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="max-width:600px;" class="modal-dialog modal-notice">

        <form enctype="multipart/form-data" asp-action="UploadReceipt" asp-controller="Policy" method="post">
            <div class="modal-dialog modal-notice" style="width:100%">
                <div class="modal-content" style="width:600px !important">
                    <div style="padding:0px;" class="modal-header">
                        <div style="background-color:#214166; margin:0px;color:white" class="row col-md-12">

                            <h5 class="modal-title" id="myModalLabel">Policy Receipt</h5>
                        </div>
                    </div>
                    <div class="modal-body" style="width:100% !important">
                        <div class="instruction">
                            <div class="row" style="height:15px;">
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label style="margin-top:0px !important;width:100px;"><b>Policy No:</b></label>

                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="txtuPolicyNo" readonly>

                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row" style="height:15px;">
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label style="margin-top:0px !important;width:100px;"><b>Certificate No:</b></label>

                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="txtReceiptNo" required name="txtReceiptNo">
                                        <label id="lblRNo" style="margin-top:0px"></label>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row" style="height:15px;">
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label style="margin-top:0px !important;width:100px;"><b>Issue Date:</b></label>

                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        <input type="date" class="form-control" id="txtReceiptDate" required name="txtReceiptDate">
                                        <label id="lblRDate" style="margin-top:0px"></label>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row" id="dvExistingReceipt" style="display:none">
                                <div class="col-md-10">
                                    <div class="form-group">
                                        <label><b>Download Receipt:</b>  </label>&nbsp;&nbsp;&nbsp;
                                        <a href="" target="_blank" id="existingReceipt" style="cursor:pointer"><label style="cursor:pointer" id="lblFileName"></label></a>
                                    </div>
                                </div>
                                <div class="col-md-2">

                                </div>
                            </div>
                            <div id="dvChoose"> <h5 class="description">Choose Policy Receipt</h5></div>
                            <input id="puPolicyId" name="puPolicyId" hidden />

                            <div id="dvFileUpload" class="fileinput fileinput-new text-center row" data-provides="fileinput">
                                <div class="fileinput-new thumbnail" style="display:none">
                                    <img src="../../assets/img/image_placeholder.jpg" id="imageUploadReceipt" name="image" multiple="multiple" alt="...">

                                </div>
                                <div class="fileinput-preview fileinput-exists thumbnail"></div>
                                <div>
                                    <span class="btn btn-rose btn-round btn-file">
                                        <span class="fileinput-new">Select File</span>
                                        <span class="fileinput-exists">Change</span>
                                        <input type="file" name="file" id="file" />
                                    </span>
                                    <a href="#pablo" class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput"><i class="fa fa-times"></i> Remove</a>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="btn btn-success btn-md fileinput-exists">Upload</button>
                                </div>

                            </div>

                        </div>
                        <div class="row pull-right">
                            <input style="margin-top:10px; padding:7px 14px; width:70px !important;  float:right" type="button" value="Close" class="btn btn-info btn-round" data-dismiss="modal" aria-hidden="true" />
                        </div>
                    </div>
                </div>
            </div>

        </form>
    </div>
</div>



<div class="modal fade" id="paymentEndorseModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="max-width:600px;" class="modal-dialog modal-notice">
        <form method="post">
            <input id="pLeadtIdEndorse" name="pLeadtIdEndorse" hidden />
            <div class="modal-dialog modal-notice" style="width:100%">
                <div class="modal-content" style="width:600px !important">
                    <div style="padding:0px;" class="modal-header">
                        <div style="background-color:#214166; margin:0px;color:white" class="row col-md-12">

                            <h5 class="modal-title" id="myModalLabel">Payment Details</h5>
                        </div>
                    </div>
                    <div class="modal-body" style="width:100% !important">
                        <div class="instruction">

                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Debit Note No</label>

                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <input type="text" class="form-control" name="pDebitNoteNoEndorse" id="pDebitNoteNoEndorse" readonly>
                                        <input type="text" class="form-control" name="pDebitNoteIdEndorse" id="pDebitNoteIdEndorse" readonly style="display:none">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">

                                        <button style="padding:6px 10px" class="btn btn-fill btn-primary btn-round" id="btnGenPaymentEndorse" onclick="generateEndorsePayment()">
                                            Generate
                                        </button>&nbsp;
                                        <input style="margin-top:10px; padding:7px 14px; width:70px !important;  float:right" type="button" value="Close" class="btn btn-info btn-round" data-dismiss="modal" aria-hidden="true" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Debit Amount</label>

                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div class="form-group">

                                        <input type="text" class="form-control" id="pDebitAmountEndorse" readonly>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">


                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Date Of Payment</label>
                                        <input type="Date" class="form-control" id="txtPaymentDateEndorse" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Amount</label>
                                        <input type="text" class="form-control" id="txtPaymentAmountEndorse" required onchange="checkFloatNumber(this);" onkeypress="return validateFloatKeyPress(this,event);" step='0.01' placeholder='0.00' />
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </form>
    </div>
</div>


<div class="modal fade" id="endorseNoModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="max-width:600px;" class="modal-dialog modal-notice">
        <form method="post">
            <input id="txtendorsementId" name="txtendorsementId" hidden />
            <input id="txtendorseClientId" name="txtendorseClientId" hidden />
            <div class="modal-dialog modal-notice" style="width:100%">
                <div class="modal-content" style="width:600px !important">
                    <div style="padding:0px;" class="modal-header">
                        <div style="background-color:#214166; margin:0px;color:white" class="row col-md-12">

                            <h5 class="modal-title" id="myModalLabel">Update Endorsement No</h5>
                        </div>
                    </div>
                    <div class="modal-body" style="width:100% !important">
                        <div class="instruction">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label style="margin-top:0px !important">Endorsement No:</label>

                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="txtEndorsementNo" required>

                                        <label id="lblPolicyNo" style="margin-top:0px !important"></label>
                                        <input id="txtEndorsementReceiptUrl" name="txtEndorsementReceiptUrl" hidden />
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-3">

                                </div>
                                <div class="col-md-5">

                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">

                                        <button style="padding:8px 18px" class="btn btn-fill btn-primary btn-round" id="btn_UpdateEndorsementNo" onclick="UpdateEndorsementNo()">
                                            Save
                                        </button>&nbsp;
                                        <input style="margin-top:10px; padding:7px 14px; width:70px !important;  float:right" type="button" value="Close" class="btn btn-info btn-round" data-dismiss="modal" aria-hidden="true" />
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </form>
    </div>
</div>



<div class="modal fade" id="endorsementReceiptModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="max-width:600px;" class="modal-dialog modal-notice">

        <form enctype="multipart/form-data" asp-action="UploadEndorsementReceipt" asp-controller="Policy" method="post">
            <div class="modal-dialog modal-notice" style="width:100%">
                <div class="modal-content" style="width:600px !important">
                    <div style="padding:0px;" class="modal-header">
                        <div style="background-color:#214166; margin:0px;color:white" class="row col-md-12">

                            <h5 class="modal-title" id="myModalLabel">Endorsement Receipt</h5>
                        </div>
                    </div>
                    <div class="modal-body" style="width:100% !important">
                        <div class="instruction">
                            <div class="row" style="height:15px;">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label style="margin-top:0px !important;width:100px;"><b>Endorsement No:</b></label>

                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="txtuEndorsementNo" readonly>

                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row" style="height:15px;">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label style="margin-top:0px !important;width:100px;"><b>Receipt No:</b></label>

                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="txtEndorseReceiptNo" required name="txtEndorseReceiptNo">
                                        <label id="lblERNo" style="margin-top:0px"></label>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row" style="height:15px;">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label style="margin-top:0px !important;width:100px;"><b>Receipt Date:</b></label>

                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <input type="date" class="form-control" id="txtEndorseReceiptDate" required name="txtEndorseReceiptDate">
                                        <label id="lblERDate" style="margin-top:0px"></label>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row" id="dvExistingEReceipt" style="display:none">
                                <div class="col-md-10">
                                    <div class="form-group">
                                        <label><b>Download Receipt:</b>  </label>&nbsp;&nbsp;&nbsp;
                                        <a href="" target="_blank" id="existingEReceipt" style="cursor:pointer"><label style="cursor:pointer" id="lblEFileName"></label></a>
                                    </div>
                                </div>
                                <div class="col-md-2">

                                </div>
                            </div>
                            <div id="dvEChoose"> <h5 class="description">Choose Endorsement Receipt</h5></div>
                            <input id="puEndorseId" name="puEndorseId" hidden />

                            <div id="dvEFileUpload" class="fileinput fileinput-new text-center row" data-provides="fileinput">
                                <div class="fileinput-new thumbnail" style="display:none">
                                    <img src="../../assets/img/image_placeholder.jpg" id="imageEUploadReceipt" name="image" multiple="multiple" alt="...">

                                </div>
                                <div class="fileinput-preview fileinput-exists thumbnail"></div>
                                <div>
                                    <span class="btn btn-rose btn-round btn-file">
                                        <span class="fileinput-new">Select File</span>
                                        <span class="fileinput-exists">Change</span>
                                        <input type="file" name="file" id="file" />
                                    </span>
                                    <a href="#pablo" class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput"><i class="fa fa-times"></i> Remove</a>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="btn btn-success btn-md fileinput-exists">Upload</button>
                                </div>

                            </div>

                        </div>
                        <div class="row pull-right">
                            <input style="margin-top:10px; padding:7px 14px; width:70px !important;  float:right" type="button" value="Close" class="btn btn-info btn-round" data-dismiss="modal" aria-hidden="true" />
                        </div>
                    </div>
                </div>
            </div>

        </form>
    </div>
</div>


@*@section Scripts {
        @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    }*@

<script>



    function validateFloatKeyPress(el, evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode;
        var number = el.value.split('.');
        if (charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57)) {
            return false;
        }
        //just one dot (thanks ddlab)
        if (number.length > 1 && charCode == 46) {
            return false;
        }
        //get the carat position
        var caratPos = getSelectionStart(el);
        var dotPos = el.value.indexOf(".");
        if (caratPos > dotPos && dotPos > -1 && (number[1].length > 1)) {
            return false;
        }
        return true;
    }

    function getSelectionStart(o) {
        if (o.createTextRange) {
            var r = document.selection.createRange().duplicate()
            r.moveEnd('character', o.value.length)
            if (r.text == '') return o.value.length
            return o.value.lastIndexOf(r.text)
        } else return o.selectionStart
    }

    function viewPolicyDetails(id, pid) {

        window.location.href = '/Policy/Details/' + id + '?pid=' + pid;
        }

    function loadDetailsView(lid) {

        var customerId = lid;

        var targeturl = '@Url.Action("LeadDetails1", "Client")?llid=' + lid;

        $.ajax({
            url: targeturl,
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "html",
            success: function (response) {

                $('#dialog562').html(response);
                $('#noticeModal23').show();


            },
            failure: function (response) {

                alert(response.responseText);
            },
            error: function (response) {

                alert(response.responseText);
            }
        });

    }

    function loadLeadEditView(lid) {

        var customerId = lid;

        var targeturl = '@Url.Action("LeadEditDetails", "Client")?llid=' + lid;

        $.ajax({
            url: targeturl,
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "html",
            success: function (response) {

                $('#dialog562').html(response);
                $('#noticeModal23').show();


            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });

    }


    function loadDebitNoteView(lid) {

        var customerId = lid;

        var targeturl = '@Url.Action("GetLeadPolicyData", "PolicyLead")?lid=' + lid;

        $.ajax({
            url: targeturl,
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "html",
            success: function (response) {

                $('#dialog562').html(response);
                $('#noticeModal23').show();


            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });

    }


    function addNewLeadView(cid) {

        var targeturl = '@Url.Action("AddNewLead", "Client")?cid=' + cid;

        $.ajax({
            url: targeturl,
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "html",
            success: function (response) {

                $('#dialog562').html(response);
                $('#noticeModal23').show();


            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });
    }

    var elem = document.getElementById("ddlClientType");
    elem.onchange = function () {

        toggelRegistrationView();

    };

    $(document).ready(function () {

        //$("#btnView").modal('tooltip');

        if (window.location.href.indexOf("policies") > -1) {
            $('#nvLiPolicy').click();
        } else if (window.location.href.indexOf("leads") > -1) {
            $('#nvLiLeads').click();
        }


        //-------------------------------SELECT CASCADING-------------------------//
        var selectedCountry = selectedRegion = selectedCity = countryCode = "";
        // This is a demo API key for testing purposes. You should rather request your API key (free) from http://battuta.medunes.net/
        var BATTUTA_KEY = "00000000000000000000000000000000";
        // Populate country select box from battuta API
        url =
            "https://geo-battuta.net/api/country/all/?key=" +
            BATTUTA_KEY +
            "&callback=?";
        // EXTRACT JSON DATA.
        $.getJSON(url, function (data) {
            $.each(data, function (index, value) {

                // APPEND OR INSERT DATA TO SELECT ELEMENT. Set the country code in the id section rather than in the value.
                $("#ddlIDIssuingCountry").append(
                    '<option id="' + value.code + '" value="' + value.code + '">' + value.name + "</option>"
                );
                $("#ddlIndividualNationality").append(
                    '<option id="' + value.code + '" value="' + value.code + '">' + value.name + "</option>"
                );

                $("#ddlDirector1Nationality").append(
                    '<option id="' + value.code + '" value="' + value.code + '">' + value.name + "</option>"
                );
                $("#ddlDirector1IDIssueingCoutnry").append(
                    '<option id="' + value.code + '" value="' + value.code + '">' + value.name + "</option>"
                );

                $("#ddlDirector2Nationality").append(
                    '<option id="' + value.code + '" value="' + value.code + '">' + value.name + "</option>"
                );
                $("#ddlDirector2IDIssueingCoutnry").append(
                    '<option  value="' + value.code + '">' + value.name + "</option>"
                );




            });
            if (document.getElementById("ddlDirector1Nationality") != null) {
                document.getElementById("ddlDirector1Nationality").value = document.getElementById("hdnDirector1Nationality").value;
                document.getElementById("ddlDirector1IDIssueingCoutnry").value = document.getElementById("hdnDirector1IDIssueingCoutnry").value;
                document.getElementById("ddlDirector2Nationality").value = document.getElementById("hdnDirector2Nationality").value;
                document.getElementById("ddlDirector2IDIssueingCoutnry").value = document.getElementById("hdnDirector2IDIssueingCoutnry").value;
                countryCode = "ng";
                url =
                    "https://geo-battuta.net/api/region/" +
                    countryCode +
                    "/all/?key=" +
                    BATTUTA_KEY +
                    "&callback=?";
                $.getJSON(url, function (data) {

                    $.each(data, function (index, value) {
                        // APPEND OR INSERT DATA TO SELECT ELEMENT.

                        $("#ddlIncorporationState").append(
                            '<option value="' + value.region + '">' + value.region + "</option>"
                        );
                    });
                    document.getElementById("ddlIncorporationState").value = document.getElementById("hdnIncorporationState").value;

                })
            }
            else {


                document.getElementById("ddlIndividualNationality").value = document.getElementById("hdnIndividualNationality").value;
                document.getElementById("ddlIDIssuingCountry").value = document.getElementById("hdnIDIssuingCountry").value;
            }

        });
        bindPolicyGrid();
        //bind leads grid
        var clientId = document.getElementById("hdnLeadClientId").value;
        $("#dvLeads").kendoGrid({
            dataSource: {

                transport: {
                    read: {
                        url: "/client/GetLeadByClient/?clientId="+clientId,
                        type: "get",

                        // the data type of the returned result.
                        datatype: "json"
                    }
                 },

                schema: {
                    model: {
                        fields: {
                            policyName: { type: "string" },
                            startDate: { type: "date" },
                            endDate: { type: "date" },
                            grossPremium: { type: "decimal" },
                            commission: { type: "decimal" },
                            insurerName: { type: "string" },
                            id: { type: "guid" },
                            clientId: { type: "guid" },
                            payment_Id: { type: "string" },
                            debitNote_Id:{ type: "string" }
                        }
                    }
                },
                pageSize: 10

            },


            filterable: true,
            sortable: true,
             pageable: true,
            dataBound: onLeadDataBound,
            columns: [

                {
                    field: "policyName",
                    title: "Policy Name"
                },

                {
                    field: "startDate",
                    title: "Start Date",
                    template: "#= kendo.toString(startDate, 'dd/MM/yyyy') #",
                    width: 120
                },

                {
                     field: "endDate",
                    title: "End Date",
                    template: "#= kendo.toString(endDate, 'dd/MM/yyyy') #",
                    width: 120
                },


                {
                    field: "grossPremium",
                    title: "Gross Premium",
                    format: "{0:n2}"

                },
                 {
                    field: "commission",
                     title: "Brokerage Commission",
                    format: "{0:n2}"

                },
                 {
                    field: "insurerName",
                    title: "Insurer"

                },
                 {
                    field: "leadType",
                    title: "Lead Type"

                },
                {
                    title: " ",
                    field: "id",
                    //template:  "<a  class=\"btn btn-sm btn-info btn-icon btn-round\" title=\" View Details\" data-toggle=\"modal\" data-target=\"\\#noticeModal23\" rel=\"tooltip\" data-original-title=\"View Details\"  onclick=\"loadDetailsView('#= id #')\" data-placement=\"top\"><i class=\"fa fa-eye\"></i></a>",
                    template: "# if (leadType == 'Lead') { #" +
                                    "<a  class=\"btn btn-sm btn-info btn-icon btn-round\" title=\" View Details\" data-toggle=\"modal\" data-target=\"\\#noticeModal23\" rel=\"tooltip\" data-original-title=\"View Details\"  onclick=\"loadDetailsView('#= id #')\" data-placement=\"top\"><i class=\"fa fa-eye\"></i></a>" +

                                    "<a class=\"btn btn-round btn-primary btn-icon btn-sm\" onclick=\"loadDebitNoteView('#=id #')\" data-toggle=\"modal\" data-target=\"\\#noticeModal23\" rel=\"tooltip\" data-original-title=\"Generate Debit Note\" title=\"Generate Debit Note\" data-placement=\"top\"> <i class=\"far fa-file-alt\"></i></a>"+

                                    "# if (payment_Id == '' && debitNote_Id != '') { #" +
                                        "<a class=\"btn btn-round btn-primary btn-icon btn-sm\" id=\"btnPayment\" data-toggle=\"modal\" data-target=\"\\#paymentModal\" EditLeadtId=\"#=id#\" EditDebitNoteId=\"#=debitNoteId#\" EditDebitNoteNo=\"#=debitNoteNo#\" EditDebitAmount=\"#=netPremium#\" rel=\"tooltip\" data-original-title=\" Generate Payment Receipt\"> <i class=\"fas fa-dollar-sign\"></i> </a>"+
                                        "<button class=\"btn btn-primary btn-lg\" id=\"btnTrigger\" data-toggle=\"modal\" data-target=\"\\#noticeModal23\" style=\"display:none\"></button>"+

                        "# }#" +

                        "# if  (payment_Id !== '') { #"+
                                        "<a class=\"btn btn-round btn-primary btn-icon btn-sm\" onclick=\"generateLeadPayment('#=id#', 'false')\" data-toggle=\"modal\" data-target=\"\\#noticeModal23\" rel=\"tooltip\" data-original-title=\" Generate Payment Receipt\" title=\" Generate Payment Receipt\" data-placement=\"top\">   <i class=\"fas fa-dollar-sign\"></i>  </a>"+
                                                 "# }#" +


                        "# } else { #" +
                        "<a  class=\"btn btn-sm btn-info btn-icon btn-round\" title=\" View Details\" data-toggle=\"modal\" data-target=\"\\#endorseModal\" rel=\"tooltip\" data-original-title=\"View Details\"  onclick=\"loadEndorsementView('#= id #')\" data-placement=\"top\"><i class=\"fa fa-eye\"></i></a>" +
                        "<a class=\"btn btn-round btn-primary btn-icon btn-sm\" onclick=\"loadEndorsementDebitNoteView('#=id#')\" data-toggle=\"modal\" data-target=\"\\#endorseDebitModal\" title=\"Generate Debit Note\" data-placement=\"top\" rel=\"tooltip\" data-original-title=\"Generate Debit Note\"> <i class=\"far fa-file-alt\"></i> </a>"+

                        "# if (payment_Id == '' && debitNote_Id != '') { #" +
                                "<a  class=\"btn btn-round btn-primary btn-icon btn-sm\" id=\"btnEndorsePayment\"  data-toggle=\"modal\" data-target=\"\\#paymentEndorseModal\" EditLeadtId=\"#=id#\" EditDebitNoteId=\"#=debitNoteId#\" EditDebitNoteNo=\"#=debitNoteNo#\" EditDebitAmount=\"#=netPremium#\" rel=\"tooltip\" data-original-title=\" Generate Payment Receipt\"><i class=\"fas fa-dollar-sign\"></i>   </a>"+
                               "<button class=\"btn btn-primary btn-lg\" id=\"btnEndorsepaymentTrigger\" data-toggle=\"modal\" data-target=\"\\#endorseDebitModal\" style=\"display:none\"></button>"+
                                                                            "# }#" +
                                                                           "# if  (payment_Id !== '') { #"+

                                                                                "<a class=\"btn btn-round btn-primary btn-icon btn-sm\" onclick=\"generateEndorsementPayment('#=id#', 'false')\" data-toggle=\"modal\" data-target=\"\\#endorseDebitModal\" rel=\"tooltip\" data-original-title=\" Generate Payment Receipt\" title=\" Generate Payment Receipt\" data-placement=\"top\">  <i class=\"fas fa-dollar-sign\"></i>    </a>"+
                                                                            "# }#" +

                        "# } #",
                    width: 120,
                    sortable: false,
                    filterable: false
                },

            ]

        });
         $('#spnLoading').hide();
    });

    function setddlState(source, dest) {

        document.getElementById(dest).value = document.getElementById(source).value;


    }

    function requiredIndividual(obj) {
        if (document.getElementById("Individual_Email") != null) {
            $("#Individual_Name").attr('required', obj);
            $("#Individual_Surname").attr('required', obj);
           // $("#Individual_OtherNames").attr('required', obj);
            $("#ddlGender").attr('required', obj);
            $("#ddlIndividualNationality").attr('required', obj);
            $("#Individual_DateOfBirth").attr('required', obj);
            $("#Individual_Address").attr('required', obj);
            $("#Individual_PhoneNo").attr('required', obj);
            $("#Individual_Email").attr('required', obj);
            $("#Individual_Occupation").attr('required', obj);
            //$("#Individual_TaxNo").attr('required', obj);
            //$("#Individual_IdentificationType").attr('required', obj);
            //$("#Individual_IdentificationNo").attr('required', obj);
            //$("#Individual_IDIssueDate").attr('required', obj);
            //$("#Individual_IDExpiryDate").attr('required', obj);
            //$("#ddlIDIssuingCountry").attr('required', obj);
            $("#Individual_SourceOfIncome").attr('required', obj);
            //$("#Individual_Bank").attr('required', obj);
            //$("#Individual_AccountNo").attr('required', obj);
            //$("#Individual_BVN").attr('required', obj);
            //$("#divProfilePhoto").attr('required', obj);

            if (obj == true) {
                document.getElementById("Individual_Email").setAttribute("type", "email");

            }

            if (obj == false) {

                document.getElementById("Individual_Email").setAttribute("type", "text");
            }

        }

    }
    function requiredCorporate(obj) {
        if (document.getElementById("Corporate_Name") != null) {
            $("#Corporate_Name").attr('required', obj);
            $("#Corporate_Address").attr('required', obj);
            $("#Corporate_Email").attr('required', obj);
            $("#Corporate_PhoneNo").attr('required', obj);
            $("#Corporate_IncorporationOrRCNumber").attr('required', obj);
            $("#ddlIncorporationState").attr('required', obj);
            $("#Corporate_IncorporationDate").attr('required', obj);
       //     $("#Corporate_TaxNo").attr('required', obj);
       //     $("#Corporate_CompanyBank").attr('required', obj);
       //     $("#Corporate_AccountNo").attr('required', obj);
       //     $("#Corporate_BankBranch").attr('required', obj);
       ////     $("#Corporate_URL").attr('required', obj);
       //     $("#Corporate_BVN").attr('required', obj);
            if (obj == true) {
                document.getElementById("Corporate_Email").setAttribute("type", "email");
          //      document.getElementById("Corporate_URL").setAttribute("type", "url");

            }

            if (obj == false) {

                document.getElementById("Corporate_Email").setAttribute("type", "text");
            //    document.getElementById("Corporate_URL").setAttribute("type", "text");
            }
        }




    }
    function requiredDirector1(obj) {
        if (document.getElementById("Director1_Name") != null) {
            $("#Director1_Name").attr('required', obj);
            $("#Director1_Surname").attr('required', obj);
          //  $("#Director1_OtherNames").attr('required', obj);
            $("#Director1_DateOfBirth").attr('required', obj);
            $("#Director1_Gender").attr('required', obj);
            $("#ddlDirector1Nationality").attr('required', obj);
            $("#Director1_Address").attr('required', obj);
            $("#Director1_Email").attr('required', obj);
            $("#Director1_PhoneNo").attr('required', obj);
            //$("#Director1_TaxNo").attr('required', obj);
            $("#Director1_Occupation").attr('required', obj);
            //$("#Director1_IdentificationType").attr('required', obj);
            //$("#Director1_IdentificationNo").attr('required', obj);
            //$("#Director1_IDIssueDate").attr('required', obj);
            //$("#Director1_IDExpiryDate").attr('required', obj);
            //$("#ddlDirector1IDIssueingCoutnry").attr('required', obj);
            $("#Director1_SourceOfIncome").attr('required', obj);
            if (obj == true) {
                document.getElementById("Director1_Email").setAttribute("type", "email");

            }

            if (obj == false) {

                document.getElementById("Director1_Email").setAttribute("type", "text");
            }

        }

    }
    function requiredDirector2(obj) {

        if (document.getElementById("Director2_Name") != null) {

            $("#Director2_Name").attr('required', obj);
            $("#Director2_Surname").attr('required', obj);
         //   $("#Director2_OtherNames").attr('required', obj);
            $("#Director2_DateOfBirth").attr('required', obj);
            $("#Director2_Gender").attr('required', obj);
            $("#ddlDirector2Nationality").attr('required', obj);
            $("#Director2_Address").attr('required', obj);
            $("#Director2_Email").attr('required', obj);
            $("#Director2_PhoneNo").attr('required', obj);
            //$("#Director2_TaxNo").attr('required', obj);
            $("#Director2_Occupation").attr('required', obj);
            //$("#Director2_IdentificationType").attr('required', obj);
            //$("#Director2_IdentificationNo").attr('required', obj);
            //$("#Director2_IDIssueDate").attr('required', obj);
            //$("#Director2_IDExpiryDate").attr('required', obj);
            //$("#ddlDirector2IDIssueingCoutnry").attr('required', obj);
            $("#Director2_SourceOfIncome").attr('required', obj);
            if (obj == true) {
                document.getElementById("Director2_Email").setAttribute("type", "email");

            }

            if (obj == false) {

                document.getElementById("Director2_Email").setAttribute("type", "text");
            }

        }
    }
    function validateDirectors() {
        var flag = "true";
        if (!ValidateDirector1()) {
            flag = "false";

            $("#divDirectorCard1").css({"border-color": "#FF0000",
             "border-width":"1px",
             "border-style":"solid"});
        }
        if (!ValidateDirector2()) {
            flag = "false";
             $("#divDirectorCard2").css({"border-color": "#FF0000",
             "border-width":"1px",
             "border-style":"solid"});



        }
        if (flag == "true") {
             document.getElementById("btnCorporateSave").click();
        }

    }


    function ValidateDirector1() {

        if (
            $("#Director1_Name").val() == "" ||
            $("#Director1_Surname").val() == "" ||
            //$("#Director1_OtherNames").val() == "" ||
            $("#Director1_DateOfBirth").val() == "" ||
            $("#Director1_Gender").val() == "" ||
            $("#ddlDirector1Nationality").val() == "" ||
            $("#Director1_Address").val() == "" ||
            $("#Director1_Email").val() == "" ||
            $("#Director1_PhoneNo").val() == "" ||
            //$("#Director1_TaxNo").val() == "" ||
            $("#Director1_Occupation").val() == "" ||
            //$("#Director1_IdentificationType").val() == "" ||
            //$("#Director1_IdentificationNo").val() == "" ||
            //$("#Director1_IDIssueDate").val() == "" ||
            //$("#Director1_IDExpiryDate").val() == "" ||
            //$("#ddlDirector1IDIssueingCoutnry").val() == "" ||
            $("#Director1_SourceOfIncome").val() == "" ) {
            return false;

        }
        else {
            return true;
        }
    }

    function ValidateDirector2() {

        if (
            $("#Director2_Name").val() == "" ||
            $("#Director2_Surname").val() == "" ||
            //$("#Director2_OtherNames").val() == "" ||
            $("#Director2_DateOfBirth").val() == "" ||
            $("#Director2_Gender").val() == "" ||
            $("#ddlDirector2Nationality").val() == "" ||
            $("#Director2_Address").val() == "" ||
            $("#Director2_Email").val() == "" ||
            $("#Director2_PhoneNo").val() == "" ||
            //$("#Director2_TaxNo").val() == "" ||
            $("#Director2_Occupation").val() == "" ||
            //$("#Director2_IdentificationType").val() == "" ||
            //$("#Director2_IdentificationNo").val() == "" ||
            //$("#Director2_IDIssueDate").val() == "" ||
            //$("#Director2_IDExpiryDate").val() == "" ||
            //$("#ddlDirector2IDIssueingCoutnry").val() == "" ||
            $("#Director2_SourceOfIncome").val() == "" ) {
            return false;

        }
        else {
            return true;
        }
    }

    function EmptyDirector1Model() {

        $("#Director1_Name").val("");
        $("#Director1_Surname").val("");
        //$("#Director1_OtherNames").val("");
        $("#Director1_DateOfBirth").val("");
        $("#Director1_Gender").val("")
        $("#ddlDirector1Nationality").val("");
        $("#Director1_Address").val("");
        $("#Director1_Email").val("");
        $("#Director1_PhoneNo").val("");
        //$("#Director1_TaxNo").val("");
        $("#Director1_Occupation").val("");
        //$("#Director1_IdentificationType").val("");
        //$("#Director1_IdentificationNo").val("");
        //$("#Director1_IDIssueDate").val("");
        //$("#Director1_IDExpiryDate").val("");
        //$("#ddlDirector1IDIssueingCoutnry").val("");
        $("#Director1_SourceOfIncome").val("");
    }

    function EmptyDirector2Model() {

        $("#Director2_Name").val("");
        $("#Director2_Surname").val("");
        //$("#Director2_OtherNames").val("");
        $("#Director2_DateOfBirth").val("");
        $("#Director2_Gender").val("");
        $("#ddlDirector2Nationality").val("");
        $("#Director2_Address").val("");
        $("#Director2_Email").val("");
        $("#Director2_PhoneNo").val("");
        //$("#Director2_TaxNo").val("");
        $("#Director2_Occupation").val("");
        //$("#Director2_IdentificationType").val("");
        //$("#Director2_IdentificationNo").val("");
        //$("#Director2_IDIssueDate").val("");
        //$("#Director2_IDExpiryDate").val("");
        //$("#ddlDirector2IDIssueingCoutnry").val("");
        $("#Director2_SourceOfIncome").val("");
    }
    function resetDirectorValues(obj) {
        if (obj == "director1") {
           // EmptyDirector1Model();
        }
        else {
            //EmptyDirector2Model();
        }
        requiredIndividual(false);
        requiredCorporate(true);
        requiredDirector1(false);
        requiredDirector2(false);
    }
    function Director1validate() {

        requiredIndividual(false);
        requiredCorporate(false);
        requiredDirector1(true);
        requiredDirector2(false);
         document.getElementById("btnDirector1").click();
    }

    function Director2validate() {
        requiredIndividual(false);
        requiredCorporate(false);
        requiredDirector1(false);
        requiredDirector2(true);
         document.getElementById("btnDirector2").click();

    }


    function toggelRegistrationView() {
        var e = document.getElementById("ddlClientType");
        var selectedValue = e.options[e.selectedIndex].text;
        if (selectedValue == 'Individual') {
            //var hiddenDiv0 = document.getElementById("CorporateId1");
            //hiddenDiv0.style.display = (this.value == "") ? "none" : "block";
            $("#divIndividual").show();
            $("#divIndividual1").show();
            $("#divIndividual2").show(); divIndividual2
            $("#divCorporate").hide();
            $("#divProfilePhoto").show();
                         requiredIndividual(true);

            requiredCorporate(false);
            requiredDirector1(false);
            requiredDirector2(false);


        }
        else {
            $("#divIndividual").hide();
            $("#divIndividual1").hide();
            $("#divIndividual2").hide();

            $("#divCorporate").show();
            $("#divProfilePhoto").hide();
                         requiredIndividual(false);
            requiredCorporate(true);
            requiredDirector1(false);
            requiredDirector2(false);

        }
    }

    toggelRegistrationView();


    if (document.getElementById("hdnEdit").value == "false") {
        var nodes = document.getElementById("profileDetails").getElementsByTagName('*');
        for (var i = 0; i < nodes.length; i++) {
            nodes[i].disabled = true;
        }
        if (document.getElementById("btnCorporateSubmit") != null) {


            document.getElementById("btnCorporateSubmit").disabled = false;
            document.getElementById("btnCorporateCancelSubmit").disabled = false;
        }

        if (document.getElementById("btnCorporateSubmit1") != null) {
            document.getElementById("btnCorporateSubmit1").disabled = false;
            document.getElementById("btnCorporateSubmitCancel1").disabled = false;
        }

        if (document.getElementById("btnindividualSubmit1") != null) {
            document.getElementById("btnindividualSubmit1").disabled = false;
            document.getElementById("btnindividualCancelSubmit1").disabled = false;
        }

        if (document.getElementById("btnindividualSubmit") != null) {


            document.getElementById("btnindividualSubmitCancel").disabled = false;
            document.getElementById("btnindividualSubmit").disabled = false;
        }

    }



    function redirectClientDetailPage() {
        var clientId = document.getElementById("hdnLeadClientId").value;
        window.location.href = "/Client/Details/" + clientId + "?IsOpen=edit";

    }

    function RedirectCancelEdit() {
        var clientId = document.getElementById("hdnLeadClientId").value;
        window.location.href = "/Client/Details/" + clientId;
    }

    function RedirectIndex() {
        var clientId = document.getElementById("hdnLeadClientId").value;
        window.location.href = "/Client";
    }

    function getConfirmationforDelete(obj) {

        var result = confirm("Are you sure to delete?");


        if (result) {
            if (obj == "btnDeleteDirector1") {

                EmptyDirector1Model();

            }
            else {

                EmptyDirector2Model();
            }
            requiredIndividual(false);
            requiredCorporate(false);
            requiredDirector1(false);
            requiredDirector2(false);
            document.getElementById(obj).click();

        }
    }



    $(document).ready(function () {
        $('#datatable').DataTable({
            "pagingType": "full_numbers",
            "lengthMenu": [
                [10, 25, 50, -1],
                [10, 25, 50, "All"]
            ],
            responsive: true,
            language: {
                search: "_INPUT_",
                searchPlaceholder: "Search records",
            }

        });

        var table = $('#datatable').DataTable();

        // Edit record
        table.on('click', '.edit', function () {
            $tr = $(this).closest('tr');

            var data = table.row($tr).data();
            alert('You press on Row: ' + data[0] + ' ' + data[1] + ' ' + data[2] + '\'s row.');
        });

        // Delete a record
        table.on('click', '.remove', function (e) {
            $tr = $(this).closest('tr');
            table.row($tr).remove().draw();
            e.preventDefault();
        });

        //Like record
        table.on('click', '.like', function () {
            alert('You clicked on Like button');
        });
    });

 var pLeadtId;

    $(document).delegate('#btnPayment',
        'click',
        function (e) {

            pLeadtId = $(this).attr('EditLeadtId');
            pDebitNoteId = $(this).attr('EditDebitNoteId');
            pDebitNoteNo = $(this).attr('EditDebitNoteNo');
            pDebitAmount = $(this).attr('EditDebitAmount');


            $('#pLeadtId').val(pLeadtId);
            $('#pDebitNoteId').val(pDebitNoteId);
            $('#pDebitNoteNo').val(pDebitNoteNo);
            $('#pDebitAmount').val(pDebitAmount);
            $("#pDebitAmount").attr("disabled", "disabled");
            $("#pDebitNoteNo").attr("disabled", "disabled");


        });

    $(document).ready(function () {

        $("#btnGenPayment").click(function (event) {

            event.preventDefault();

            if ($('#txtPaymentAmount').val() == "" || $('#txtPaymentAmount').val() == undefined || $('#txtPaymentAmount').val() == null) {
                kendo.alert('Please provide amount.')
                return;
            }

            if ($('#txtPaymentDate').val() == "" || $('#txtPaymentDate').val() == undefined || $('#txtPaymentDate').val() == null) {
                kendo.alert('Please provide payment date.')
                return;
            }

             var pAmount_val = $('#txtPaymentAmount').val();
            var dAmount_val = $('#pDebitAmount').val();

            pAmount_val = parseFloat(pAmount_val);
            dAmount_val = parseFloat(dAmount_val);

            if (pAmount_val != dAmount_val) {

                if (confirm('The given amount is not matching with debit amount. \nAre you sure you want to save this?')) {

                } else {
                    return;
                }
            }

            var LeadPaymentDetail = {

                debitNoteNo: $("#pDebitNoteNo").val(),
                DebitNoteId: $("#pDebitNoteId").val(),
                LeadId: $("#pLeadtId").val(),
                DateOfPayment: $("#txtPaymentDate").val(),
              Amount: $("#txtPaymentAmount").val(),
                PaymentType: $("#sltPaymentType").val()
            };

            $.ajax({
                type: "POST",
                url: "/Client/SaveLeadPaymentDetails",
                data: JSON.stringify(LeadPaymentDetail),
                dataType: "json",
                contentType: 'application/json; charset=utf-8',

                success: function (r) {

                    if (r.msg == "Success") {

                       //demo.showSwal('success-message');
                        //alert('success');
                        //var x = document.getElementById("paymentModal");
                        //x.style.display = "none";
                        $('#paymentModal').modal('hide');
                        //$('#paymentModal').hide();
                        //window.setTimeout( , 5000 );
                        generateLeadPayment($("#pLeadtId").val(), 'true');

                    } else if (r.msg == "Fail") {

                        alert(r.msg);

                    } else if (r.msg == "No Data") {
                        alert(r.msg);

                    }
                },
                error: function () {
                    alert(r.msg);
                }
            });
        });
    });

    function generateLeadPayment(lid, isnew) {

        //var targeturl = '@Url.Action("GenerateLeadPayment", "Client")?lid=' + lid+"&isnew"+isnew;
        var targeturl = '/Client/GenerateLeadPayment/?lid='+lid+"&isnew="+isnew;

            $.ajax({
                url: targeturl,
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "html",
                success: function (response) {
                    $('#btnTrigger').click();
                    $('#dialog562').html(response);
                    $('#noticeModal23').show();


                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });
    }


    function loadPolicyDetailsView(lid) {

        var customerId = lid;

        var targeturl = '@Url.Action("PolicyDeatils", "Policy")?llid=' + lid;

        $.ajax({
            url: targeturl,
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "html",
            success: function (response) {

                $('#dialog562').html(response);
                $('#noticeModal23').show();


            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });

    }

    function loadCreditNoteView(lid) {

        var customerId = lid;

        var targeturl = '@Url.Action("GetPolicyCreditNoteData", "Policy")?lid=' + lid;

        $.ajax({
            url: targeturl,
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "html",
            success: function (response) {

                $('#dialog562').html(response);
                $('#noticeModal23').show();


            },
            failure: function (response) {

                alert(response.responseText);
            },
            error: function (response) {

                alert(response.responseText);
            }
        });

    }

    $(document).ready(function () {

        $("#btn_UpdatePolicyNo").click(function (event) {

            event.preventDefault();

            if ($('#txtPolicyNo').val() == "" || $('#txtPolicyNo').val() == undefined || $('#txtPolicyNo').val() == null) {
                alert('Please provide policy no.')
                return;
            }
            policy_Data = JSON.parse('@Html.Raw(Json.Serialize(Model.Policies))');

            var policy;
            for (var i = 0; i < policy_Data.length; i++) {
                if (policy_Data[i].id.toLowerCase() == $("#pPolicyId").val().toLowerCase()) {
                    policy = policy_Data[i];
                    break;
                }
            }

            policy.PolicyNo = $("#txtPolicyNo").val();
             //policy.EndorsementNo = $("#txtEndorsementNo").val();

            $.ajax({
                type: "POST",
                url: "/Policy/SavePolicyNo",
                data: JSON.stringify(policy),
                dataType: "json",
                contentType: 'application/json; charset=utf-8',

                success: function (r) {

                    if (r.msg == "Success") {
                        //alert('success');
                        //demo.showSwal('success-message');
                        $('#policyNoModal').modal('hide');

                        window.location.href = '/Client/Details/?id=' + policy.clientId+'&IsOpen=policies';

                    } else if (r.msg == "Fail") {

                        alert(r.msg);

                    } else if (r.msg == "No Data") {
                        alert(r.msg);

                    }
                },
                error: function () {
                    alert(r.msg);
                }
            });
        });
    });

    $(document).delegate('#btnUpdatePolicyNo',
        'click',
        function (e) {

           var pPolicyId = $(this).attr('EditPolicyId');


            $('#pPolicyId').val(pPolicyId);
            $('#txtPolicyNo').val($(this).attr('EditPolicyIdNo'));
            $('#lblPolicyNo').text($(this).attr('EditPolicyIdNo'));
            $('#txtPolicyReceiptUrl').val($(this).attr('EditReceiptNoImgUrl'));
            //$('#txtEndorsementNo').val($(this).attr('EditEndorsementNo'));

            if ($('#txtPolicyReceiptUrl').val() != '' && $('#txtPolicyReceiptUrl').val() != null && $('#txtPolicyReceiptUrl').val() != undefined) {
                $('#txtPolicyNo').hide();
                $('#lblPolicyNo').show();
                $('#btn_UpdatePolicyNo').hide();
            } else {
                $('#txtPolicyNo').show();
                $('#lblPolicyNo').hide();
                $('#btn_UpdatePolicyNo').show();
            }

        });

    $(document).delegate('#btnUploadReceipt',
        'click',
        function (e) {

           var pPolicyId = $(this).attr('EditPolicyId');
            var imgUrl = $(this).attr('EditReceiptImgUrl');
             $("#lblRNo").text('');
            $("#lblRDate").text('');
            $("#txtReceiptNo").val('');
                $("#txtReceiptDate").val('');
            if (imgUrl != null && imgUrl != "") {
                $('#imageUploadReceipt').attr("src", imgUrl);
                $('#dvExistingReceipt').show();
                $("#existingReceipt").attr("href", imgUrl);
                $('#dvFileUpload').hide();
                $('#dvChoose').hide();
                var fname = imgUrl.substr(imgUrl.indexOf('_') + 1);


                $("#lblFileName").text(fname);
                $("#lblRNo").text($(this).attr('EditReceiptNo'));
                $("#lblRDate").text($(this).attr('EditReceiptDate'));
                 $("#txtReceiptNo").hide();
                $("#txtReceiptDate").hide();
            } else {
                $('#dvExistingReceipt').hide();
                $('#dvFileUpload').show();
                $('#dvChoose').show();
                $("#txtReceiptNo").show();
                $("#txtReceiptDate").show();
            }


            $('#puPolicyId').val(pPolicyId);
            $('#txtuPolicyNo').val($(this).attr('EditPolicyIdNo'));
            //$('#txtuEndorsementNo').val($(this).attr('EditEndorsementNo'));


        });

    $(document).delegate('#btnUpdateEndorseNo',
        'click',
        function (e) {

           var endorsementId = $(this).attr('EditEndorseId');


            $('#txtendorsementId').val(endorsementId);
            $('#txtendorseClientId').val($(this).attr('EditClientId'));
            $('#txtEndorsementNo').val($(this).attr('EditEndorseNo'));
            $('#lblEndorsementNo').text($(this).attr('EditEndorseNo'));
            $('#txtEndorsementReceiptUrl').val($(this).attr('EditReceiptNoImgUrl'));

            if ($('#txtEndorsementReceiptUrl').val() != '' && $('#txtEndorsementReceiptUrl').val() != null && $('#txtEndorsementReceiptUrl').val() != undefined) {
                $('#txtEndorsementNo').hide();
                $('#lblEndorsementNo').show();
                $('#btn_UpdateEndorsementNo').hide();
            } else {
                $('#txtEndorsementNo').show();
                $('#lblEndorsementNo').hide();
                $('#btn_UpdateEndorsementNo').show();
            }

        });

$(document).delegate('#btnUploadEReceipt',
        'click',
        function (e) {

           var pEndorseId = $(this).attr('EditEndorseId');
            var imgUrl = $(this).attr('EditReceiptImgUrl');
             $("#lblERNo").text('');
            $("#lblERDate").text('');
            $("#txtEndorseReceiptNo").val('');
                $("#txtEndorseReceiptDate").val('');
            if (imgUrl != null && imgUrl != "") {
                $('#imageEUploadReceipt').attr("src", imgUrl);
                $('#dvExistingEReceipt').show();
                $("#existingEReceipt").attr("href", imgUrl);
                $('#dvEFileUpload').hide();
                $('#dvEChoose').hide();
                var fname = imgUrl.substr(imgUrl.indexOf('_') + 1);


                $("#lblEFileName").text(fname);
                $("#lblERNo").text($(this).attr('EditReceiptNo'));
                $("#lblERDate").text($(this).attr('EditReceiptDate'));
                 $("#txtEndorseReceiptNo").hide();
                $("#txtEndorseReceiptDate").hide();
            } else {
                $('#dvExistingEReceipt').hide();
                $('#dvEFileUpload').show();
                $('#dvEChoose').show();
                $("#txtEndorseReceiptNo").show();
                $("#txtEndorseReceiptDate").show();
            }


            $('#puEndorseId').val(pEndorseId);
            $('#txtuEndorsementNo').val($(this).attr('EditEndorseNo'));
            //$('#txtuEndorsementNo').val($(this).attr('EditEndorsementNo'));


        });

</script>


<style>
    body {
        font-family: Arial;
    }

    /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    /* Style the buttons inside the tab */
    #directorbtn1 {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
    }

    #directorbtn2 {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
    }

    /* Change background color of buttons on hover */
    #directorbtn1:hover {
        background-color: #ddd;
    }

    #directorbtn2:hover {
        background-color: #ddd;
    }


    #directorbtn1:active {
        background-color: #ccc;
    }

    #directorbtn2:active {
        background-color: #ccc;
    }


    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }
</style>



<script type="text/x-kendo-template" id="policytemplate">


    <div>
        <div class="dvEndorsements"></div>
    </div>

</script>